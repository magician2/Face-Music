{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport { Audio } from 'expo-av';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport Slider from '@react-native-community/slider';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { Ionicons, Entypo, MaterialIcons } from '@expo/vector-icons';\nimport { AntDesign } from '@expo/vector-icons';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport Back from \"../assets/back.png\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar convertTime = function convertTime(minutes) {\n  if (minutes) {\n    var hrs = minutes / 60;\n    var minute = hrs.toString().split('.')[0];\n    var percent = parseInt(hrs.toString().split('.')[1].slice(0, 2));\n    var sec = Math.ceil(60 * percent / 100);\n\n    if (parseInt(minute) < 10 && sec < 10) {\n      return \"0\" + minute + \":0\" + sec;\n    }\n\n    if (sec == 60) {\n      return minute + 1 + \":00\";\n    }\n\n    if (parseInt(minute) < 10) {\n      return \"0\" + minute + \":\" + sec;\n    }\n\n    if (sec < 10) {\n      return minute + \":0\" + sec;\n    }\n\n    return minute + \":\" + sec;\n  }\n};\n\nexport default function NewPlayer() {\n  var height = Dimensions.get('window').height;\n  var width = Dimensions.get('window').width;\n  var navigation = useNavigation();\n  var route = useRoute();\n  var SelectIndex = route.params.SelectIndex;\n  var AudioList = route.params.AudioList;\n\n  var _useState = useState(SelectIndex),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentIndex = _useState2[0],\n      setcurrentIndex = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPlaying = _useState4[0],\n      setisPlaying = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      soundObj = _useState6[0],\n      setsoundObj = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      playbackInstance = _useState8[0],\n      setPlaybackInstance = _useState8[1];\n\n  var _useState9 = useState(1.0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      volume = _useState10[0],\n      setVolume = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isBuffering = _useState12[0],\n      setIsBuffering = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      duration = _useState14[0],\n      setDuration = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      currentPosition = _useState16[0],\n      setCurrentPosition = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      playbackPosition = _useState18[0],\n      setPlaybackPosition = _useState18[1];\n\n  var sound = useRef(new Audio.Sound());\n  var currentRef = useRef(currentIndex);\n  currentRef.current = currentIndex;\n  useEffect(function () {\n    return loadAudio();\n  }, [currentIndex]);\n\n  var demo = function demo() {\n    return AudioList[currentRef.current];\n  };\n\n  var loadAudio = function loadAudio() {\n    var playbackobj, source, status, data;\n    return _regeneratorRuntime.async(function loadAudio$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(sound.current);\n\n          case 3:\n            playbackobj = _context.sent;\n            console.log('currentIndex', currentIndex);\n            source = {\n              uri: demo().uri\n            };\n            console.log(demo().uri);\n            status = {\n              shouldPlay: isPlaying,\n              volume: volume\n            };\n            playbackobj.setOnPlaybackStatusUpdate(function (status) {\n              onPlaybackStatusUpdate(status);\n            });\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(playbackobj.loadAsync(source, status, true));\n\n          case 11:\n            data = _context.sent;\n            console.log(data);\n            setPlaybackInstance();\n            setsoundObj(playbackobj);\n            setIsBuffering(data.isBuffering);\n            console.log('Load RefC: ', currentRef.current);\n            console.log('play Success');\n            setPlaybackInstance(playbackobj);\n            _context.next = 24;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 21]], Promise);\n  };\n\n  var onPlaybackStatusUpdate = function onPlaybackStatusUpdate(status) {\n    setIsBuffering(status.isLoaded);\n    setsoundObj(status);\n\n    if (status.isPlaying) {\n      setDuration(status.durationMillis);\n      setPlaybackPosition(status.positionMillis);\n      setsoundObj(status);\n    }\n  };\n\n  console.log(playbackPosition, duration);\n\n  var calculateSeedBar = function calculateSeedBar() {\n    if (playbackPosition !== null && duration !== null) {\n      return playbackPosition / duration;\n    }\n\n    return 0;\n  };\n\n  var renderCurrentTime = function renderCurrentTime() {\n    return convertTime(playbackPosition / 1000);\n  };\n\n  var moveAudio = function moveAudio(value) {\n    try {\n      var data = sound.current.setPositionAsync(Math.floor(duration * value));\n      setPlaybackPosition(soundObj.positionMillis);\n      setsoundObj(data);\n      sound.current.playAsync();\n      setisPlaying(!isPlaying);\n    } catch (error) {\n      console.log('error inside onSlidingComplete callback', error);\n    }\n  };\n\n  var handlePlayPause = function handlePlayPause() {\n    if (isBuffering == true) {\n      isPlaying ? sound.current.pauseAsync() : sound.current.playAsync();\n      setisPlaying(!isPlaying);\n    }\n  };\n\n  var handlePreviousTrack = function handlePreviousTrack() {\n    if (sound.current !== null) {\n      sound.current.unloadAsync();\n      setcurrentIndex(currentIndex === 0 ? AudioList.length - 1 : currentIndex - 1);\n      console.log('back');\n      loadAudio();\n    }\n  };\n\n  var handleNextTrack = function handleNextTrack() {\n    return _regeneratorRuntime.async(function handleNextTrack$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (currentIndex == 0 || isBuffering == true) {\n              sound.current.unloadAsync();\n              console.log('next');\n              setcurrentIndex(currentIndex + 1 > AudioList.length - 1 ? 0 : currentIndex + 1);\n              loadAudio();\n              console.log('Next  : ', currentIndex);\n            }\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var img = demo().imageSource;\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [_jsx(LinearGradient, {\n      start: {\n        x: 0,\n        y: 0.2\n      },\n      end: {\n        x: 0,\n        y: 1\n      },\n      colors: ['#7979F2', '#FF76A1'],\n      style: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 0,\n        height: height\n      }\n    }), _jsx(ImageBackground, {\n      source: Back,\n      style: {\n        flex: 1,\n        alignItems: 'center'\n      },\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsxs(View, {\n          style: styles.playerBox,\n          children: [img ? _jsx(Image, {\n            source: {\n              uri: img\n            },\n            style: styles.playerImage\n          }) : null, _jsx(Text, {\n            style: styles.playerTitle,\n            children: demo().title\n          }), _jsx(Text, {\n            style: styles.playerArtist,\n            children: demo().artist\n          })]\n        }, \"{item}\"), _jsxs(View, {\n          style: styles.seekBar,\n          children: [_jsx(Slider, {\n            style: {\n              width: '90%',\n              height: 20\n            },\n            minimumValue: 0,\n            maximumValue: 1,\n            value: calculateSeedBar()\n          }), _jsxs(View, {\n            style: {\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              width: '90%',\n              marginTop: 10\n            },\n            children: [_jsx(Text, {\n              children: convertTime(duration / 1000)\n            }), _jsx(Text, {\n              children: convertTime(playbackPosition / 1000)\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.controls,\n          children: [_jsx(TouchableOpacity, {\n            style: styles.control,\n            onPress: function onPress() {\n              return handlePreviousTrack();\n            },\n            children: _jsx(AntDesign, {\n              name: \"stepbackward\",\n              size: 40,\n              color: \"gray\"\n            })\n          }), _jsx(TouchableOpacity, {\n            style: styles.control,\n            onPress: function onPress() {\n              return handlePlayPause();\n            },\n            children: isPlaying ? _jsx(Ionicons, {\n              name: \"ios-pause\",\n              size: 60,\n              color: \"gray\"\n            }) : _jsx(Ionicons, {\n              name: \"ios-play-circle\",\n              size: 60,\n              color: \"gray\"\n            })\n          }), _jsx(TouchableOpacity, {\n            style: styles.control,\n            onPress: function onPress() {\n              return handleNextTrack();\n            },\n            children: _jsx(Text, {\n              children: \"Next\"\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}\nvar height = Dimensions.get('window').height;\nvar width = Dimensions.get('window').width;\nvar styles = StyleSheet.create({\n  container: {\n    width: width,\n    height: height,\n    backgroundColor: 'white',\n    marginTop: 150,\n    paddingTop: 40,\n    borderTopStartRadius: 30,\n    borderTopEndRadius: 30\n  },\n  playerBox: {\n    width: '100%',\n    height: 400,\n    alignItems: 'center'\n  },\n  playerImage: {\n    width: 300,\n    height: 300,\n    marginBottom: 20\n  },\n  playerTitle: {\n    fontSize: 30,\n    margin: 10\n  },\n  control: {\n    margin: 20\n  },\n  controls: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    width: width\n  },\n  seekBar: {\n    alignItems: 'center',\n    width: '100%'\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","useState","Audio","useNavigation","useRoute","Slider","TouchableOpacity","Ionicons","Entypo","MaterialIcons","AntDesign","SafeAreaView","LinearGradient","Back","convertTime","minutes","hrs","minute","toString","split","percent","parseInt","slice","sec","Math","ceil","NewPlayer","height","Dimensions","get","width","navigation","route","SelectIndex","params","AudioList","currentIndex","setcurrentIndex","isPlaying","setisPlaying","soundObj","setsoundObj","playbackInstance","setPlaybackInstance","volume","setVolume","isBuffering","setIsBuffering","duration","setDuration","currentPosition","setCurrentPosition","playbackPosition","setPlaybackPosition","sound","Sound","currentRef","current","loadAudio","demo","playbackobj","console","log","source","uri","status","shouldPlay","setOnPlaybackStatusUpdate","onPlaybackStatusUpdate","loadAsync","data","isLoaded","durationMillis","positionMillis","calculateSeedBar","renderCurrentTime","moveAudio","value","setPositionAsync","floor","playAsync","error","handlePlayPause","pauseAsync","handlePreviousTrack","unloadAsync","length","handleNextTrack","img","imageSource","flex","x","y","position","left","right","top","alignItems","styles","container","playerBox","playerImage","playerTitle","title","playerArtist","artist","seekBar","flexDirection","justifyContent","marginTop","controls","control","StyleSheet","create","backgroundColor","paddingTop","borderTopStartRadius","borderTopEndRadius","marginBottom","fontSize","margin"],"sources":["/Users/comneder/Desktop/micp-master/Components/NewPlayer.js"],"sourcesContent":["import  React,{ useEffect, useRef, useState} from 'react';\nimport { Text, View, StyleSheet, Button ,Image,Dimensions,ImageBackground} from 'react-native';\nimport { Audio } from 'expo-av';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport Slider from '@react-native-community/slider';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { Ionicons ,Entypo, MaterialIcons } from '@expo/vector-icons'\nimport { AntDesign } from '@expo/vector-icons';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport Back from '../assets/back.png';\n\n\n\n\nconst convertTime = minutes => {\n  \n  if (minutes) {\n    const hrs = minutes / 60;\n    const minute = hrs.toString().split('.')[0];\n    const percent = parseInt(hrs.toString().split('.')[1].slice(0, 2));\n    const sec = Math.ceil((60 * percent) / 100);\n    if (parseInt(minute) < 10 && sec < 10) {\n      return `0${minute}:0${sec}`;\n    }\n\n    if (sec == 60) {\n      return `${minute + 1}:00`;\n    }\n\n    if (parseInt(minute) < 10) {\n      return `0${minute}:${sec}`;\n    }\n\n    if (sec < 10) {\n      return `${minute}:0${sec}`;\n    }\n\n    return `${minute}:${sec}`;\n  }\n};\n\n\n\n\n\n\nexport default function NewPlayer() {\n\nconst height = Dimensions.get('window').height;\nconst width = Dimensions.get('window').width;\nconst navigation = useNavigation()\nconst route = useRoute()\nconst SelectIndex = route.params.SelectIndex\nconst AudioList  = route.params.AudioList\n\n//選択されたデータとsongDataと合わせる  (しかしそれだと本来songDataの中に入っていたデータと重ねるものがある)\n\n//重なったデータをspliceで抽出する　ーーーそうすると中には選択されたデータが消える\n// newData.map((val,i)=>{\n//   if(val === SelectAudio[i]){\n//     newData.splice(i,1)\n//     newData.unshift(SelectAudio[0]);\n\n//   }\n\n// })\n\n//  \n\n\n\n//最後また抽出されたデータと　選択されたデータrを合わせて新たなListとして利用する\n\n\nconst [currentIndex,setcurrentIndex] = useState(SelectIndex)\nconst [isPlaying,setisPlaying] = useState(true)\nconst [soundObj,setsoundObj] = useState(null)\nconst [playbackInstance,setPlaybackInstance] = useState(null)\nconst [volume,setVolume] = useState(1.0)\nconst [isBuffering,setIsBuffering] = useState(null)\nconst [duration,setDuration] = useState(null)\nconst [currentPosition,setCurrentPosition] = useState(null)\nconst [playbackPosition,setPlaybackPosition] = useState(null)\n\nconst sound = useRef(new Audio.Sound())\nconst currentRef = useRef(currentIndex)\n\ncurrentRef.current = currentIndex\n\n\n\nuseEffect(() => {\n  return loadAudio()\n  \n},[currentIndex])\n\n\n\n\n\n  // const playSound = async () => {\n\n  //   const status = {\n  //     shouldPlay: isPlaying,\n  //     value: currentIndex\n  //    }\n  //   const { sound: playbackObject } = await Audio.Sound.createAsync({uri:SelectAudio[currentIndex].uri},status);\n  //    sound.current = playbackObject\n     \n  //   setsoundObj(status)\n  // };\n  const demo = ()=>{\n\n       return AudioList[currentRef.current]\n\n    }\n  \n\n\n\n  const  loadAudio= async () => {\n\n\t\ttry {\n\t\t\tconst playbackobj = await sound.current\n      console.log('currentIndex',currentIndex);\n\t\t\tconst source = {\n\t\t\t\turi: demo().uri\n\t\t\t}\n      console.log(demo().uri);\n\t\t\tconst status = {\n\t\t\t\tshouldPlay: isPlaying,\n\t\t\t\tvolume: volume,\n\t\t\t}\n      \n\t\t\tplaybackobj.setOnPlaybackStatusUpdate((status) => {onPlaybackStatusUpdate(status)});\n      \n\t\t\tconst data = await playbackobj.loadAsync(source, status, true)\n\n      console.log(data);\n      setPlaybackInstance()\n      setsoundObj(playbackobj)\n      setIsBuffering(data.isBuffering)\n      console.log('Load RefC: ',currentRef.current);\n      console.log('play Success');\n      setPlaybackInstance(playbackobj)\n\n\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t\t\n\t}\n\nconst onPlaybackStatusUpdate = (status) => {\n  setIsBuffering(status.isLoaded)\n  setsoundObj(status)\n  if(status.isPlaying ) {\n    setDuration(status.durationMillis)\n    setPlaybackPosition(status.positionMillis)\n    setsoundObj(status)\n  }\n}\nconsole.log(playbackPosition,duration);\n\tconst \tcalculateSeedBar = () =>{\n\n\t\tif(playbackPosition !== null && duration !== null){\n\t\t\treturn playbackPosition / duration\n\t\t}\n\t\treturn 0 \n\t}\n\n\tconst renderCurrentTime = () =>{\n    \n\t\treturn convertTime(playbackPosition / 1000)\n\t\t\n\t}\n\n  const moveAudio =  ( value) => {\n\t\ttry {\n\t\t  const data =  sound.current.setPositionAsync(Math.floor(duration * value))\n    setPlaybackPosition(soundObj.positionMillis);\n\t\tsetsoundObj(data)\n\t\tsound.current.playAsync()\n    setisPlaying(!isPlaying)\n\t\t} catch (error) {\n\t\tconsole.log('error inside onSlidingComplete callback', error);\n\t\t}\n\t};\n\n\n\tconst handlePlayPause =  () => {\n\n    if(isBuffering == true){\n    \n\t\tisPlaying ?  sound.current.pauseAsync() :  sound.current.playAsync()\n\t\tsetisPlaying(!isPlaying)\n\t}\n   }\n\n \tconst handlePreviousTrack= ()=> {\n\n\t\tif (sound.current !== null)  {\n      sound.current.unloadAsync()\n      setcurrentIndex(currentIndex === 0 ? AudioList.length -1 : currentIndex-1)\n     console.log('back');\n     loadAudio()\n\n\t\t}\n\t\t\n\t}\n\n  const handleNextTrack = async () => {\n\t\tif (currentIndex == 0 || isBuffering == true) {\n      sound.current.unloadAsync()\n      \n\t\t\tconsole.log('next');\n      setcurrentIndex(currentIndex+1 > AudioList.length - 1 ? 0 : currentIndex+1 )\n      loadAudio()\n      console.log('Next  : ',currentIndex);\n\t\t}\n\t}\n\n\nconst img = demo().imageSource\n\n\n\n\nreturn (\n  <View\n  style= {{flex:1,}}>\n\n      <LinearGradient\n          start={{x: 0, y: 0.2}} end={{x: 0, y: 1}}\n          // Background Linear Gradient\n          colors={['#7979F2', '#FF76A1']}\n          style={{position: 'absolute',\n          left: 0,\n          right: 0,\n          top: 0,\n          height:height}}\n      />\n      <ImageBackground\n      source={Back} \n      style={{flex:1,alignItems: 'center'}}>\n\n\n    <View style={styles.container}>\n\n    <View key=\"{item}\" style={styles.playerBox}>\n            {img ? <Image source={{uri: img}} style={styles.playerImage}/> : null}\n            <Text style={styles.playerTitle}>{demo().title}</Text>\n            <Text style={styles.playerArtist}>{demo().artist}</Text>\n        </View>\n\n\n\n\n      <View style={styles.seekBar}>\n          \n            <Slider\n            style={{width: '90%',height: 20}}\n            minimumValue={0}\n            maximumValue={1}\n            value={calculateSeedBar()}\n            // onValueChange ={value =>{\n            //   const dd = convertTime(value * duration / 1000)\n            //   setCurrentPosition(dd)\n            // }}\n            // onSlidingStart = {\n            //   async ()=>{\n            //     if(!isPlaying) return\n\n            //     try{\n            //       await handlePlayPause()\n            //     }\n            //     catch(e){'error with onslidingStart',e}\n            //   }\n            // }\n            // onSlidingComplete = {async (value) =>\n            //   await moveAudio(value)\n            // }\n\n            />\n          <View style={{flexDirection:'row',justifyContent: 'space-between',width:'90%',marginTop:10}}>\n            <Text>{convertTime(duration/1000)}</Text>\n            <Text>{convertTime(playbackPosition/1000)}</Text>\n          </View>\n      </View>\n\n\n\n      <View style={styles.controls}>\n      <TouchableOpacity style={styles.control} onPress={()=>handlePreviousTrack()}>\n      <AntDesign name=\"stepbackward\" size={40} color=\"gray\" />\n            </TouchableOpacity>\n          <TouchableOpacity style={styles.control} onPress={()=>handlePlayPause()}>\n              {isPlaying ? (\n                <Ionicons name='ios-pause' size={60} color='gray' />\n              ) : (\n                <Ionicons name='ios-play-circle' size={60} color='gray' />\n              )}\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.control} onPress={()=>handleNextTrack()}>\n                <Text>Next</Text>\n            </TouchableOpacity>\n      </View>\n\n\n\n    </View>\n    </ImageBackground>\n    </View>\n)\n}\n\nconst height = Dimensions.get('window').height;\nconst width = Dimensions.get('window').width;\n\n\nconst styles = StyleSheet.create({\ncontainer: {\n  width: width,\n  height: height,\n  backgroundColor: 'white',\n  marginTop:150,\n  paddingTop:40,\n  borderTopStartRadius:30,\n  borderTopEndRadius:30\n},\nplayerBox:{\n  width:'100%',\n  height:400,\n alignItems: 'center',\n},\nplayerImage:{\n  width:300, \n  height:300,\n  marginBottom:20\n},\nplayerTitle:{\n  fontSize:30,\n  margin:10\n},\ncontrol:{\n  margin:20\n},\ncontrols:{\n  flexDirection: 'row',\n  justifyContent: 'center',\n  width:width,\n},\nseekBar:{\n  alignItems: 'center',\n  width:'100%',\n}\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}